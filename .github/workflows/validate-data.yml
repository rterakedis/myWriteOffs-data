name: Validate Data

on:
  pull_request:
    branches:
      - main
    paths:
      - 'data/**'
      - 'scripts/**'
      - '.github/workflows/validate-data.yml'

jobs:
  validate:
    runs-on: ubuntu-latest
    
    steps:
      - name: Checkout code
        uses: actions/checkout@v4
      
      - name: Set up Python
        uses: actions/setup-python@v5
        with:
          python-version: '3.8'
      
      - name: Install dependencies
        run: |
          python -m pip install --upgrade pip
          if [ -f scripts/requirements.txt ]; then
            pip install -r scripts/requirements.txt
          fi
      
      - name: Validate JSON Schema
        run: |
          echo "Running JSON schema validation..."
          # This will be implemented in Phase 3
          # python scripts/validate-data.py --schema-only
          echo "Validation script not yet implemented - Phase 3 task"
          echo "For now, checking that JSON files are valid..."
          
      - name: Check JSON syntax
        run: |
          echo "Checking JSON syntax for all data files..."
          find data -name "*.json" -type f -exec python -m json.tool {} \; > /dev/null
          echo "All JSON files are syntactically valid"
      
      - name: Validation Summary
        run: |
          echo "âœ… Basic validation passed"
          echo "Note: Full validation suite will be implemented in Phase 3"
          echo "This minimal workflow reduces GitHub Actions costs"
